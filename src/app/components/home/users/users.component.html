<div class="row">
    
    <div class="col-lg-2 mx-auto align-items-center text-center mt-3 mb-3 top-title">
        Usuários

    </div>
    <div class="col-lg-9 mx-auto filter-bar row  align-items-center mt-3 mb-3">
        <mat-form-field class="col-md-10">
            <input matInput (keyup.enter)="ordenate('filter');" [(ngModel)]="filterValue" placeholder="Buscar pelo nome">
            <button mat-button  *ngIf="filterValue" matSuffix mat-icon-button aria-label="Clear" (click)="filterValue='';ordenate('filter')">
                <i class="h4"><mat-icon>close</mat-icon></i>
            </button>
        </mat-form-field>
            <!-- <button tabindex="3" color="primary" matSuffix mat-icon-button aria-label="upload" (click)="upload()" matTooltip="Importar usuários" matTooltipPosition="left">
                <i class="h4"><mat-icon>cloud_upload</mat-icon></i>
            </button> -->
        <div class="col-md-2  text-center row"> 
            <button mat-raised-button color="primary" (click)="ordenate('filter')"  class="col text-white text-center m-1">
                <mat-icon class="m-0 p-0">search</mat-icon>
            </button>

            <button mat-raised-button color="primary" (click)="download()" matTooltip="Exportar usuários" matTooltipPosition="right" class="col text-white text-center m-1">
                <mat-icon class="m-0 p-0">cloud_download</mat-icon>
            </button>

            <button mat-raised-button color="primary" (click)="open()"  class="col text-white text-center  m-1">
                <mat-icon class="m-0 p-0">add</mat-icon>
            </button>
        </div>
        
    
    </div>
    <div class="col-md-12 mx-auto p-2 center div-table">
        <table mat-table [dataSource]="dataSource" matSort matSortActive="userId" matSortDisableClear
            matSortDirection="desc">

            <!-- Position Column -->
            <ng-container matColumnDef="photo" >
                <th mat-header-cell *matHeaderCellDef class=" text-center"> 
                </th>
                <td mat-cell *matCellDef="let element" class="text-center" (click)="search(element)">
                    <mat-icon style="height: 75px; width: 75px; font-size: 75px;" color="primary" *ngIf="!element.photo">account_circle</mat-icon>
                    <img tyle="height: 75px; width: 75px; font-size: 75px; border-radius:75px" color="primary" *ngIf="element.photo" [src]="element.photo">
                </td>
            </ng-container>

            <ng-container matColumnDef="userId" >
                <th mat-header-cell *matHeaderCellDef class="text-center"> ID <mat-icon class="filterBullet" (click)="ordenate('users.userId')">{{ filterOptions.orderbyoption.type === 'ASC'  && filterOptions.orderbyoption.field === 'users.userId' ? 'arrow_drop_up' : 'arrow_drop_down'}}</mat-icon>
                </th>
                <td mat-cell *matCellDef="let element" class="text-center" (click)="search(element)"> {{element.userId}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef class=""> Nome<mat-icon class="filterBullet" (click)="ordenate('users.name')">{{ filterOptions.orderbyoption.type === 'ASC'  && filterOptions.orderbyoption.field === 'users.name' ? 'arrow_drop_up' : 'arrow_drop_down'}}</mat-icon> </th>
                <td mat-cell *matCellDef="let element" (click)="search(element)" class=""> {{element.name}} </td>
            </ng-container>

            <!-- Mali Column -->
            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef class=""> E-mail <mat-icon class="filterBullet" (click)="ordenate('users.email')">{{ filterOptions.orderbyoption.type === 'ASC'  && filterOptions.orderbyoption.field === 'users.email' ? 'arrow_drop_up' : 'arrow_drop_down'}}</mat-icon></th>
                <td mat-cell *matCellDef="let element" (click)="search(element)" class=""> {{element.email}} </td>
            </ng-container>

            <!-- Parnter Column -->
            <ng-container matColumnDef="partner">
                <th mat-header-cell *matHeaderCellDef class=""> Empresa <mat-icon class="filterBullet" (click)="ordenate('users.partnerId')">{{ filterOptions.orderbyoption.type === 'ASC'  && filterOptions.orderbyoption.field === 'users.partnerId' ? 'arrow_drop_up' : 'arrow_drop_down'}}</mat-icon></th>
                <td mat-cell *matCellDef="let element" (click)="search(element)" class=""> {{element.partnerName != undefined ? element.partnerName :"▬"}}</td>
            </ng-container>

            
            <!-- userType Column -->
            <!-- <ng-container matColumnDef="userType" >
                <th mat-header-cell *matHeaderCellDef class=""> {{texts.msgs.userType}} <mat-icon class="filterBullet" (click)="ordenate('users.typeId')">{{ filterOptions.orderbyoption.type === 'ASC'  && filterOptions.orderbyoption.field === 'users.typeId' ? 'arrow_drop_up' : 'arrow_drop_down'}}</mat-icon></th>
                <td mat-cell *matCellDef="let element" (click)="search(element)" class=""> {{element.typeName}} </td>
            </ng-container> -->

            <!-- Symbol Column -->
            <ng-container matColumnDef="active">
                <th mat-header-cell *matHeaderCellDef [style.width]="'5%'" class="text-center"> Status </th>
                <td mat-cell *matCellDef="let element" class="text-center"> 
                    
                    <mat-slide-toggle [checked]='element.active==1' color="primary" (change)="delete(element)"></mat-slide-toggle>
                    
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <!-- <div class="col-12 mx-auto p-0 center mat-paginator">
        <div class="mat-paginator-outer-container">
            <div class="mat-paginator-container">
                <div class="mat-paginator-page-size ng-star-inserted float-left pl-4 pt--2">
                    <div class="mat-paginator-page-size-label float-left">{{texts.msgs.perPage}}:</div>
                    <div class="ng-star-inserted float-left"> {{users.per_page}}</div>
                </div>
                <div class="mat-paginator-range-actions list-inline-item float-right button-content">
                    <button class="mat-icon-button mat-button-base button-next float-right" mat-icon-button="" type="button" ng-reflect-disabled="false" ng-reflect-position="above" ng-reflect-message="Next page" aria-label="Next page" [disabled]="users.next_page_url==undefined"  (click)="next()">
                        <mat-icon>keyboard_arrow_right</mat-icon>
                    </button>
                    <button class="mat-icon-button mat-button-base button-prev float-right" mat-icon-button=""type="button" ng-reflect-disabled="true" ng-reflect-position="above" ng-reflect-message="Previous page" aria-label="Previous page" [disabled]="users.prev_page_url==undefined" (click)="prev()">
                        <mat-icon>keyboard_arrow_left</mat-icon>
                    </button>
                    <div class="mat-paginator-range-label float-right mr-2  pt--2"  *ngIf="users.data?.length>0"> {{users.from}} – {{users.to}} / {{users.total}}</div>
                </div>
            </div>
        </div>
    </div> -->
</div>

<div class="col-12 mx-auto text-center mt-5">
    <button mat-raised-button type="submit" color="primary"  (click)="next()" class="btn-lg p-2 btn-block col-lg-2 col-md-4 col-xs-6 text-white rounded">
        <span *ngIf="!loadingPage">Ver mais</span>
        <span *ngIf="loadingPage" class="spinner-border spinner-border-sm sp-login" role="status" aria-hidden="true"></span>
    </button>
</div>
<div class="mat-paginator-range-label "  *ngIf="users.data.length>0">   {{users.to}} de  {{users.total}}</div>

<a [href]="urlFile" target="_blank" download hidden="true" id="fileDownload"></a>
<div class="position-absolute loading" *ngIf="loading">
    <span  class="spinner-border spinner-border-sm sp-login" role="status" aria-hidden="true"></span>
    
</div>